var calculator=new Vue({el:"#calculator",data:{amount:"10,000",frequency:1,term:7,interestRate:3,totalPaid:"",totalInterest:"",monthlyPayment:"",payoffDate:"",headerString:"",tenPayment:"",tenSave:"",tenPayoff:"",twentyfivePayment:"",twentyfiveSave:"",twentyfivePayoff:""},watch:{amount:function(t){const e=t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");Vue.nextTick(()=>this.amount=e)}},methods:{getResults:function(){let t,e,a,n,o,s,l,r,h,m,u,c,g,y,f,d=parseInt(this.amount.replace(/,/g,""),10),v=this.interestRate/100/12,P=this.term,p=[],D=[],b=[],w=d,M=2;l=(new Date).getFullYear(),1==this.frequency&&(P*=12),a=(t=Math.pow(1+v,P)-1)/(e=v*Math.pow(1+v,P)),this.monthlyPayment=d/a,this.totalPaid=this.monthlyPayment*P,this.totalInterest=this.totalPaid-d;const S=["January","February","March","April","May","June","July","August","September","October","November","December"];for(n=new Date,o=new Date(n.setMonth(n.getMonth()+P)),this.payoffMonth=S[o.getMonth()],l=o.getFullYear(),this.payoffDate=this.payoffMonth+" "+l,p.push(d),i=0;i<P;i++)w=w*v+w-this.monthlyPayment,p.push(w),D=P>24?p.filter((t,e)=>e%12==0):p;for(D.pop(),D.push(0),n=new Date,i=0;i<D.length;i++)r=l=n.getFullYear(),"January"!=(h=S[s=n.getMonth()])&&"February"!=h&&"March"!=h&&"April"!=h&&"August"!=h&&"September"!=h&&"October"!=h&&"November"!=h&&"December"!=h||(h=h.substring(0,3)+"."),P>24?(f=" '"+(f=(r=i+l).toString().substr(-2)),b.push(f)):((f=i+s)>11&&f<=23?(f-=12,r=l+1):f>23&&(f-=24,r=l+2),"January"!=(h=S[f])&&"February"!=h&&"March"!=h&&"April"!=h&&"August"!=h&&"September"!=h&&"October"!=h&&"November"!=h&&"December"!=h||(h=h.substring(0,3)+"."),f=h+" '"+r.toString().substr(-2),b.push(f));this.headerString=P>24?"Loan balance in "+h+" of each year":"Monthly loan balance",(m=document.getElementById("calculator").offsetWidth)<400?D.length>=22?M=10:D.length>=12&&D.length<22?M=5:D.length<7&&(M=1):D.length<12?M=1:D.length>17&&(M=5),this.drawChart(D,b,M),this.tenPayment=1.1*this.monthlyPayment,u=-1*Math.log(1-v*d/this.tenPayment)/Math.log(1+v),n=new Date,fullPayoffDate10=new Date(n.setMonth(n.getMonth()+u+1)),s=S[fullPayoffDate10.getMonth()],l=fullPayoffDate10.getFullYear(),this.tenPayoff=s+" "+l,g=this.tenPayment*u-d,this.tenSave=this.totalInterest-g,this.twentyfivePayment=1.25*this.monthlyPayment,c=-1*Math.log(1-v*d/this.twentyfivePayment)/Math.log(1+v),n=new Date,fullPayoffDate25=new Date(n.setMonth(n.getMonth()+c+1)),s=S[fullPayoffDate25.getMonth()],l=fullPayoffDate25.getFullYear(),this.twentyfivePayoff=s+" "+l,y=this.twentyfivePayment*c-d,this.twentyfiveSave=this.totalInterest-y,this.monthlyPayment=this.monthlyPayment.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.totalPaid=this.totalPaid.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.totalInterest=this.totalInterest.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.tenPayment=this.tenPayment.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.tenSave=this.tenSave.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.twentyfivePayment=this.twentyfivePayment.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.twentyfiveSave=this.twentyfiveSave.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},drawChart:function(t,e,a){function i(){Highcharts.chart("chart-container-loancalc",{chart:{type:"column",styledMode:!0,spacingBottom:0,spacingRight:0,spacingLeft:0,animation:!1},title:{text:null},series:[{name:"Loan balance",data:t}],plotOptions:{series:{groupPadding:.1}},legend:{enabled:!1},xAxis:{labels:{style:{textOverflow:"none"},autoRotation:0},categories:e,tickLength:5,tickInterval:a},yAxis:{title:!1,labels:{overflow:"allow",formatter:function(){return"$"+Highcharts.numberFormat(this.value,0,".",",")}},tickAmount:5},credits:{enabled:!1},tooltip:{shadow:!1,padding:10,shared:!0,valuePrefix:"$",valueDecimals:2}})}Highcharts.setOptions({lang:{thousandsSep:",",numericSymbols:[null,"M","G","T","P","E"]}}),"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("DOMContentLoaded",i)}},mounted:function(){this.getResults()}});function limitNumber(){this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength),type="number",maxlength="2")}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGN1bGF0b3IuanMiXSwibmFtZXMiOlsiY2FsY3VsYXRvciIsIlZ1ZSIsImVsIiwiZGF0YSIsImFtb3VudCIsImZyZXF1ZW5jeSIsInRlcm0iLCJpbnRlcmVzdFJhdGUiLCJ0b3RhbFBhaWQiLCJ0b3RhbEludGVyZXN0IiwibW9udGhseVBheW1lbnQiLCJwYXlvZmZEYXRlIiwiaGVhZGVyU3RyaW5nIiwidGVuUGF5bWVudCIsInRlblNhdmUiLCJ0ZW5QYXlvZmYiLCJ0d2VudHlmaXZlUGF5bWVudCIsInR3ZW50eWZpdmVTYXZlIiwidHdlbnR5Zml2ZVBheW9mZiIsIndhdGNoIiwibmV3VmFsdWUiLCJyZXN1bHQiLCJyZXBsYWNlIiwibmV4dFRpY2siLCJ0aGlzIiwibWV0aG9kcyIsImdldFJlc3VsdHMiLCJETnVtZXJhdG9yIiwiRERlbm9taW5hdG9yIiwiRCIsImN1cnJlbnREYXRlIiwiZnVsbFBheW9mZkRhdGUiLCJtb250aCIsInllYXIiLCJjYXRZZWFyIiwibW9udGhOYW1lIiwiY29udGFpbmVyV2lkdGgiLCJOMTAiLCJOMjUiLCJJMTAiLCJJMjUiLCJjYXRlZ29yaWVzIiwiQSIsInBhcnNlSW50IiwiciIsIm4iLCJtb250aGx5RGF0YSIsImFubnVhbERhdGEiLCJjYXRBcnJheSIsImxvYW5Ub3RhbCIsInRpY2tJbnRlcnZhbCIsIkRhdGUiLCJnZXRGdWxsWWVhciIsIk1hdGgiLCJwb3ciLCJtb250aE5hbWVzIiwic2V0TW9udGgiLCJnZXRNb250aCIsInBheW9mZk1vbnRoIiwicHVzaCIsImkiLCJmaWx0ZXIiLCJfIiwicG9wIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwidG9TdHJpbmciLCJzdWJzdHIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib2Zmc2V0V2lkdGgiLCJkcmF3Q2hhcnQiLCJsb2ciLCJmdWxsUGF5b2ZmRGF0ZTEwIiwiZnVsbFBheW9mZkRhdGUyNSIsInRvTG9jYWxlU3RyaW5nIiwidW5kZWZpbmVkIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwibWF4aW11bUZyYWN0aW9uRGlnaXRzIiwiZHJhd0hpZ2hjaGFydHMiLCJIaWdoY2hhcnRzIiwiY2hhcnQiLCJ0eXBlIiwic3R5bGVkTW9kZSIsInNwYWNpbmdCb3R0b20iLCJzcGFjaW5nUmlnaHQiLCJzcGFjaW5nTGVmdCIsImFuaW1hdGlvbiIsInRpdGxlIiwidGV4dCIsInNlcmllcyIsIm5hbWUiLCJwbG90T3B0aW9ucyIsImdyb3VwUGFkZGluZyIsImxlZ2VuZCIsImVuYWJsZWQiLCJ4QXhpcyIsImxhYmVscyIsInN0eWxlIiwidGV4dE92ZXJmbG93IiwiYXV0b1JvdGF0aW9uIiwidGlja0xlbmd0aCIsInlBeGlzIiwib3ZlcmZsb3ciLCJmb3JtYXR0ZXIiLCJudW1iZXJGb3JtYXQiLCJ2YWx1ZSIsInRpY2tBbW91bnQiLCJjcmVkaXRzIiwidG9vbHRpcCIsInNoYWRvdyIsInBhZGRpbmciLCJzaGFyZWQiLCJ2YWx1ZVByZWZpeCIsInZhbHVlRGVjaW1hbHMiLCJzZXRPcHRpb25zIiwibGFuZyIsInRob3VzYW5kc1NlcCIsIm51bWVyaWNTeW1ib2xzIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb3VudGVkIiwibGltaXROdW1iZXIiLCJtYXhMZW5ndGgiLCJzbGljZSIsIm1heGxlbmd0aCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQUEsV0FBQSxJQUFBQyxJQUFBLENBQ0FDLEdBQUEsY0FDQUMsS0FBQSxDQUNBQyxPQUFBLFNBQ0FDLFVBQUEsRUFDQUMsS0FBQSxFQUNBQyxhQUFBLEVBQ0FDLFVBQUEsR0FDQUMsY0FBQSxHQUNBQyxlQUFBLEdBQ0FDLFdBQUEsR0FDQUMsYUFBQSxHQUNBQyxXQUFBLEdBQ0FDLFFBQUEsR0FDQUMsVUFBQSxHQUNBQyxrQkFBQSxHQUNBQyxlQUFBLEdBQ0FDLGlCQUFBLElBR0FDLE1BQUEsQ0FDQWYsT0FBQSxTQUFBZ0IsR0FDQSxNQUFBQyxFQUFBRCxFQUFBRSxRQUFBLE1BQUEsSUFDQUEsUUFBQSx3QkFBQSxLQUNBckIsSUFBQXNCLFNBQUEsSUFBQUMsS0FBQXBCLE9BQUFpQixLQUdBSSxRQUFBLENBRUFDLFdBQUEsV0FDQSxJQUdBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUtBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQXJCQUMsRUFBQUMsU0FBQW5CLEtBQUFwQixPQUFBa0IsUUFBQSxLQUFBLElBQUEsSUFDQXNCLEVBQUFwQixLQUFBakIsYUFBQSxJQUFBLEdBQ0FzQyxFQUFBckIsS0FBQWxCLEtBVUF3QyxFQUFBLEdBQ0FDLEVBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBUCxFQU9BUSxFQUFBLEVBQ0FqQixHQUFBLElBQUFrQixNQUFBQyxjQUlBLEdBQUE1QixLQUFBbkIsWUFDQXdDLEdBQUEsSUFNQWhCLEdBRkFGLEVBQUEwQixLQUFBQyxJQUFBLEVBQUFWLEVBQUFDLEdBQUEsSUFDQWpCLEVBQUFnQixFQUFBUyxLQUFBQyxJQUFBLEVBQUFWLEVBQUFDLElBR0FyQixLQUFBZCxlQUFBZ0MsRUFBQWIsRUFFQUwsS0FBQWhCLFVBQUFnQixLQUFBZCxlQUFBbUMsRUFFQXJCLEtBQUFmLGNBQUFlLEtBQUFoQixVQUFBa0MsRUFHQSxNQUFBYSxFQUFBLENBQUEsVUFBQSxXQUFBLFFBQUEsUUFBQSxNQUFBLE9BQ0EsT0FBQSxTQUFBLFlBQUEsVUFBQSxXQUFBLFlBZUEsSUFaQXpCLEVBQUEsSUFBQXFCLEtBRUFwQixFQUFBLElBQUFvQixLQUFBckIsRUFBQTBCLFNBQUExQixFQUFBMkIsV0FBQVosSUFFQXJCLEtBQUFrQyxZQUFBSCxFQUFBeEIsRUFBQTBCLFlBQ0F4QixFQUFBRixFQUFBcUIsY0FFQTVCLEtBQUFiLFdBQUFhLEtBQUFrQyxZQUFBLElBQUF6QixFQUdBYSxFQUFBYSxLQUFBakIsR0FFQWtCLEVBQUEsRUFBQUEsRUFBQWYsRUFBQWUsSUFDQVgsRUFBQUEsRUFBQUwsRUFBQUssRUFBQXpCLEtBQUFkLGVBQ0FvQyxFQUFBYSxLQUFBVixHQUdBRixFQURBRixFQUFBLEdBQ0FDLEVBQUFlLE9BQUEsQ0FBQUMsRUFBQUYsSUFBQUEsRUFBQSxJQUFBLEdBR0FkLEVBVUEsSUFMQUMsRUFBQWdCLE1BQ0FoQixFQUFBWSxLQUFBLEdBRUE3QixFQUFBLElBQUFxQixLQUVBUyxFQUFBLEVBQUFBLEVBQUFiLEVBQUFpQixPQUFBSixJQUlBMUIsRUFIQUQsRUFBQUgsRUFBQXNCLGNBS0EsWUFIQWpCLEVBQUFvQixFQURBdkIsRUFBQUYsRUFBQTJCLGNBSUEsWUFBQXRCLEdBQUEsU0FBQUEsR0FBQSxTQUFBQSxHQUFBLFVBQUFBLEdBQUEsYUFBQUEsR0FBQSxXQUFBQSxHQUFBLFlBQUFBLEdBQUEsWUFBQUEsSUFDQUEsRUFBQUEsRUFBQThCLFVBQUEsRUFBQSxHQUFBLEtBR0FwQixFQUFBLElBR0FKLEVBQUEsTUFEQUEsR0FEQVAsRUFBQTBCLEVBQUEzQixHQUNBaUMsV0FBQUMsUUFBQSxJQUVBbkIsRUFBQVcsS0FBQWxCLE1BRUFBLEVBQUFtQixFQUFBNUIsR0FDQSxJQUFBUyxHQUFBLElBQ0FBLEdBQUEsR0FDQVAsRUFBQUQsRUFBQSxHQUNBUSxFQUFBLEtBQ0FBLEdBQUEsR0FDQVAsRUFBQUQsRUFBQSxHQU1BLFlBREFFLEVBQUFvQixFQUFBZCxLQUNBLFlBQUFOLEdBQUEsU0FBQUEsR0FBQSxTQUFBQSxHQUFBLFVBQUFBLEdBQUEsYUFBQUEsR0FBQSxXQUFBQSxHQUFBLFlBQUFBLEdBQUEsWUFBQUEsSUFDQUEsRUFBQUEsRUFBQThCLFVBQUEsRUFBQSxHQUFBLEtBR0F4QixFQUFBTixFQUFBLEtBQUFELEVBQUFnQyxXQUFBQyxRQUFBLEdBQ0FuQixFQUFBVyxLQUFBbEIsSUFPQWpCLEtBQUFaLGFBREFpQyxFQUFBLEdBQ0EsbUJBQUFWLEVBQUEsZ0JBRUEsd0JBR0FDLEVBQUFnQyxTQUFBQyxlQUFBLGNBQUFDLGFBRUEsSUFPQXZCLEVBQUFpQixRQUFBLEdBQ0FkLEVBQUEsR0FDQUgsRUFBQWlCLFFBQUEsSUFBQWpCLEVBQUFpQixPQUFBLEdBQ0FkLEVBQUEsRUFDQUgsRUFBQWlCLE9BQUEsSUFDQWQsRUFBQSxHQUtBSCxFQUFBaUIsT0FBQSxHQUNBZCxFQUFBLEVBQ0FILEVBQUFpQixPQUFBLEtBQ0FkLEVBQUEsR0FNQTFCLEtBQUErQyxVQUFBeEIsRUFBQUMsRUFBQUUsR0FJQTFCLEtBQUFYLFdBQUEsSUFBQVcsS0FBQWQsZUFFQTJCLEdBQUEsRUFBQWdCLEtBQUFtQixJQUFBLEVBQUE1QixFQUFBRixFQUFBbEIsS0FBQVgsWUFBQXdDLEtBQUFtQixJQUFBLEVBQUE1QixHQUVBZCxFQUFBLElBQUFxQixLQUVBc0IsaUJBQUEsSUFBQXRCLEtBQUFyQixFQUFBMEIsU0FBQTFCLEVBQUEyQixXQUFBcEIsRUFBQSxJQUVBTCxFQUFBdUIsRUFBQWtCLGlCQUFBaEIsWUFDQXhCLEVBQUF3QyxpQkFBQXJCLGNBRUE1QixLQUFBVCxVQUFBaUIsRUFBQSxJQUFBQyxFQUVBTSxFQUFBZixLQUFBWCxXQUFBd0IsRUFBQUssRUFFQWxCLEtBQUFWLFFBQUFVLEtBQUFmLGNBQUE4QixFQUlBZixLQUFBUixrQkFBQSxLQUFBUSxLQUFBZCxlQUNBNEIsR0FBQSxFQUFBZSxLQUFBbUIsSUFBQSxFQUFBNUIsRUFBQUYsRUFBQWxCLEtBQUFSLG1CQUFBcUMsS0FBQW1CLElBQUEsRUFBQTVCLEdBRUFkLEVBQUEsSUFBQXFCLEtBRUF1QixpQkFBQSxJQUFBdkIsS0FBQXJCLEVBQUEwQixTQUFBMUIsRUFBQTJCLFdBQUFuQixFQUFBLElBRUFOLEVBQUF1QixFQUFBbUIsaUJBQUFqQixZQUNBeEIsRUFBQXlDLGlCQUFBdEIsY0FFQTVCLEtBQUFOLGlCQUFBYyxFQUFBLElBQUFDLEVBRUFPLEVBQUFoQixLQUFBUixrQkFBQXNCLEVBQUFJLEVBRUFsQixLQUFBUCxlQUFBTyxLQUFBZixjQUFBK0IsRUFHQWhCLEtBQUFkLGVBQUFjLEtBQUFkLGVBQUFpRSxvQkFBQUMsRUFDQSxDQUFBQyxzQkFBQSxFQUFBQyxzQkFBQSxJQUVBdEQsS0FBQWhCLFVBQUFnQixLQUFBaEIsVUFBQW1FLG9CQUFBQyxFQUNBLENBQUFDLHNCQUFBLEVBQUFDLHNCQUFBLElBRUF0RCxLQUFBZixjQUFBZSxLQUFBZixjQUFBa0Usb0JBQUFDLEVBQ0EsQ0FBQUMsc0JBQUEsRUFBQUMsc0JBQUEsSUFFQXRELEtBQUFYLFdBQUFXLEtBQUFYLFdBQUE4RCxvQkFBQUMsRUFDQSxDQUFBQyxzQkFBQSxFQUFBQyxzQkFBQSxJQUVBdEQsS0FBQVYsUUFBQVUsS0FBQVYsUUFBQTZELG9CQUFBQyxFQUNBLENBQUFDLHNCQUFBLEVBQUFDLHNCQUFBLElBRUF0RCxLQUFBUixrQkFBQVEsS0FBQVIsa0JBQUEyRCxvQkFBQUMsRUFDQSxDQUFBQyxzQkFBQSxFQUFBQyxzQkFBQSxJQUVBdEQsS0FBQVAsZUFBQU8sS0FBQVAsZUFBQTBELG9CQUFBQyxFQUNBLENBQUFDLHNCQUFBLEVBQUFDLHNCQUFBLEtBSUFQLFVBQUEsU0FBQXhCLEVBQUFDLEVBQUFFLEdBU0EsU0FBQTZCLElBQ0FDLFdBQUFDLE1BQUEsMkJBQUEsQ0FDQUEsTUFBQSxDQUNBQyxLQUFBLFNBQ0FDLFlBQUEsRUFDQUMsY0FBQSxFQUNBQyxhQUFBLEVBQ0FDLFlBQUEsRUFDQUMsV0FBQSxHQUVBQyxNQUFBLENBQ0FDLEtBQUEsTUFFQUMsT0FBQSxDQUFBLENBQ0FDLEtBQUEsZUFDQXhGLEtBQUE0QyxJQUdBNkMsWUFBQSxDQUNBRixPQUFBLENBQ0FHLGFBQUEsS0FHQUMsT0FBQSxDQUNBQyxTQUFBLEdBRUFDLE1BQUEsQ0FDQUMsT0FBQSxDQUNBQyxNQUFBLENBQ0FDLGFBQUEsUUFFQUMsYUFBQSxHQUVBM0QsV0FBQU8sRUFDQXFELFdBQUEsRUFDQW5ELGFBQUFBLEdBRUFvRCxNQUFBLENBQ0FkLE9BQUEsRUFDQVMsT0FBQSxDQUNBTSxTQUFBLFFBQ0FDLFVBQUEsV0FDQSxNQUFBLElBQUF4QixXQUFBeUIsYUFBQWpGLEtBQUFrRixNQUFBLEVBQUEsSUFBQSxPQUdBQyxXQUFBLEdBRUFDLFFBQUEsQ0FDQWIsU0FBQSxHQUVBYyxRQUFBLENBQ0FDLFFBQUEsRUFDQUMsUUFBQSxHQUNBQyxRQUFBLEVBQ0FDLFlBQUEsSUFDQUMsY0FBQSxLQTlEQWxDLFdBQUFtQyxXQUFBLENBQ0FDLEtBQUEsQ0FDQUMsYUFBQSxJQUNBQyxlQUFBLENBQUEsS0FBQSxJQUFBLElBQUEsSUFBQSxJQUFBLFFBZ0VBLGFBQUFsRCxTQUFBbUQsWUFBQSxnQkFBQW5ELFNBQUFtRCxXQUNBeEMsSUFFQVgsU0FBQW9ELGlCQUFBLG1CQUFBekMsS0FLQTBDLFFBQUEsV0FDQWpHLEtBQUFFLGdCQUlBLFNBQUFnRyxjQUNBbEcsS0FBQWtGLE1BQUExQyxPQUFBeEMsS0FBQW1HLFlBQ0FuRyxLQUFBa0YsTUFBQWxGLEtBQUFrRixNQUFBa0IsTUFBQSxFQUFBcEcsS0FBQW1HLFdBQ0F6QyxLQUFBLFNBQ0EyQyxVQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY2FsY3VsYXRvciA9IG5ldyBWdWUoe1xuICAgIGVsOiAnI2NhbGN1bGF0b3InLFxuICAgIGRhdGE6IHtcbiAgICAgIGFtb3VudDogJzEwLDAwMCcsXG4gICAgICBmcmVxdWVuY3k6MSxcbiAgICAgIHRlcm06IDcsXG4gICAgICBpbnRlcmVzdFJhdGU6IDMsXG4gICAgICB0b3RhbFBhaWQ6ICcnLFxuICAgICAgdG90YWxJbnRlcmVzdDogJycsXG4gICAgICBtb250aGx5UGF5bWVudDogJycsXG4gICAgICBwYXlvZmZEYXRlOiAnJyxcbiAgICAgIGhlYWRlclN0cmluZzogJycsXG4gICAgICB0ZW5QYXltZW50OiAnJyxcbiAgICAgIHRlblNhdmU6ICcnLFxuICAgICAgdGVuUGF5b2ZmOiAnJyxcbiAgICAgIHR3ZW50eWZpdmVQYXltZW50OiAnJyxcbiAgICAgIHR3ZW50eWZpdmVTYXZlOiAnJyxcbiAgICAgIHR3ZW50eWZpdmVQYXlvZmY6ICcnLFxuXG4gICAgfSxcbiAgICB3YXRjaDoge1xuICAgICAgICBhbW91bnQ6IGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXdWYWx1ZS5yZXBsYWNlKC9cXEQvZywgXCJcIilcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiLFwiKTtcbiAgICAgICAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB0aGlzLmFtb3VudCA9IHJlc3VsdCk7XG4gICAgICAgICAgfSxcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgIC8vIGZ1bmN0aW9ucyBnbyBoZXJlXG4gICAgICBnZXRSZXN1bHRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBBID0gcGFyc2VJbnQoKHRoaXMuYW1vdW50LnJlcGxhY2UoLywvZywgJycpKSwxMCksXG4gICAgICAgICAgICByID0gKHRoaXMuaW50ZXJlc3RSYXRlLzEwMCkvMTIsXG4gICAgICAgICAgICBuID0gdGhpcy50ZXJtLFxuICAgICAgICAgICAgRE51bWVyYXRvcixcbiAgICAgICAgICAgIEREZW5vbWluYXRvcixcbiAgICAgICAgICAgIEQsXG4gICAgICAgICAgICBjdXJyZW50RGF0ZSxcbiAgICAgICAgICAgIGZ1bGxQYXlvZmZEYXRlLFxuICAgICAgICAgICAgbW9udGgsXG4gICAgICAgICAgICB5ZWFyLFxuICAgICAgICAgICAgY2F0WWVhcixcbiAgICAgICAgICAgIG1vbnRoTmFtZSxcbiAgICAgICAgICAgIG1vbnRobHlEYXRhID0gW10sXG4gICAgICAgICAgICBhbm51YWxEYXRhID0gW10sXG4gICAgICAgICAgICBjYXRBcnJheSA9IFtdLFxuICAgICAgICAgICAgbG9hblRvdGFsID0gQSxcbiAgICAgICAgICAgIGNvbnRhaW5lcldpZHRoLFxuICAgICAgICAgICAgTjEwLFxuICAgICAgICAgICAgTjI1LFxuICAgICAgICAgICAgSTEwLFxuICAgICAgICAgICAgSTI1LFxuICAgICAgICAgICAgY2F0ZWdvcmllcyxcbiAgICAgICAgICAgIHRpY2tJbnRlcnZhbCA9IDIuXG4gICAgICAgICAgICB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgIFxuICAgICAgICAvLyBjb252ZXJ0cyB0aGUgdGVybSBpbnRvIG1vbnRoc1xuICAgICAgICBpZiAodGhpcy5mcmVxdWVuY3kgPT0gMSkge1xuICAgICAgICAgICAgbiA9IG4qMTI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhbW9ydGl6ZWQgbG9hbiBjYWxjdWxhdGlvbnNcbiAgICAgICAgRE51bWVyYXRvciA9IChNYXRoLnBvdygoMStyKSxuKSktMTtcbiAgICAgICAgRERlbm9taW5hdG9yID0gciooTWF0aC5wb3coKDErciksIG4pKTtcbiAgICAgICAgRCA9IEROdW1lcmF0b3IvRERlbm9taW5hdG9yO1xuXG4gICAgICAgIHRoaXMubW9udGhseVBheW1lbnQgPSBBL0Q7XG5cbiAgICAgICAgdGhpcy50b3RhbFBhaWQgPSB0aGlzLm1vbnRobHlQYXltZW50Km47XG5cbiAgICAgICAgdGhpcy50b3RhbEludGVyZXN0ID0gdGhpcy50b3RhbFBhaWQgLSBBO1xuXG4gICAgICAgIC8vIGdldCBjdXJyZW50IGRhdGUgYW5kIHBheW9mZiBkYXRlXG4gICAgICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLFxuICAgICAgICAgICAgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIlxuICAgICAgICAgICAgXTtcblxuICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgZnVsbFBheW9mZkRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50RGF0ZS5nZXRNb250aCgpK24pKTtcblxuICAgICAgICB0aGlzLnBheW9mZk1vbnRoID0gbW9udGhOYW1lc1tmdWxsUGF5b2ZmRGF0ZS5nZXRNb250aCgpXTtcbiAgICAgICAgeWVhciA9IGZ1bGxQYXlvZmZEYXRlLmdldEZ1bGxZZWFyKCk7XG5cbiAgICAgICAgdGhpcy5wYXlvZmZEYXRlID0gdGhpcy5wYXlvZmZNb250aCArIFwiIFwiICsgeWVhcjtcblxuICAgICAgICAvLyBnZXQgZGF0YSBmb3IgY2hhcnRcbiAgICAgICAgbW9udGhseURhdGEucHVzaChBKTsgLy8gYWRkcyBzdGFydGluZyBsb2FuIGFtb3VudCB0byB0aGUgZGF0YSBhcnJheVxuXG4gICAgICAgIGZvciAoaT0wOyBpPG47IGkrKykge1xuICAgICAgICAgICAgbG9hblRvdGFsID0gbG9hblRvdGFsICogciArIGxvYW5Ub3RhbCAtIHRoaXMubW9udGhseVBheW1lbnQ7IC8vIG1vbnRobHkgbG9hbiB0b3RhbCBjYWxjdWxhdGVkIGFzIHByaW5jaXBhbCBwbHVzIGludGVyZXN0LCBtaW51cyB0aGUgcGF5bWVudFxuICAgICAgICAgICAgbW9udGhseURhdGEucHVzaChsb2FuVG90YWwpOyBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG4+MjQpIHtcbiAgICAgICAgICAgICAgICBhbm51YWxEYXRhID0gbW9udGhseURhdGEuZmlsdGVyKChfLGkpID0+IGkgJSAxMiA9PSAwKTsgLy8gdGFrZXMgZXZlcnkgMTJ0aCBkYXRhIHBvaW50XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5udWFsRGF0YSA9IG1vbnRobHlEYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBhbm51YWxEYXRhLnBvcCgpOyAvLyByZW1vdmVzIGxhc3QgZGF0YSBwb2ludCBhbmQgcmVwbGFjZXMgaXQgd2l0aCAwXG4gICAgICAgIGFubnVhbERhdGEucHVzaCgwKTtcblxuICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgZm9yIChpPTA7IGk8YW5udWFsRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgeWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBtb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICBtb250aE5hbWUgPSBtb250aE5hbWVzW21vbnRoXTtcbiAgICAgICAgICAgIGNhdFllYXIgPSB5ZWFyO1xuXG4gICAgICAgICAgICBpZiAobW9udGhOYW1lID09ICdKYW51YXJ5JyB8fCBtb250aE5hbWUgPT0gJ0ZlYnJ1YXJ5JyB8fCBtb250aE5hbWUgPT0gJ01hcmNoJyB8fCBtb250aE5hbWUgPT0gJ0FwcmlsJyB8fCBtb250aE5hbWUgPT0gJ0F1Z3VzdCcgfHwgbW9udGhOYW1lID09ICdTZXB0ZW1iZXInIHx8IG1vbnRoTmFtZSA9PSAnT2N0b2JlcicgfHwgbW9udGhOYW1lID09ICdOb3ZlbWJlcicgfHwgbW9udGhOYW1lID09ICdEZWNlbWJlcicpIHtcbiAgICAgICAgICAgICAgICBtb250aE5hbWUgPSBtb250aE5hbWUuc3Vic3RyaW5nKDAsMykgKyAnLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuPjI0KSB7XG4gICAgICAgICAgICAgICAgY2F0WWVhciA9IGkgKyB5ZWFyOyAvLyBnZXRzIHRoZSBhcnJheSBvZiB5ZWFycyBmb3IgdGhlIGxvYW5cbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzID0gY2F0WWVhci50b1N0cmluZygpLnN1YnN0cigtMik7IC8vIGNvbnZlcnRzIHllYXJzIHRvIHR3byBkaWdpdHNcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzID0gJyBcXCcnICsgY2F0ZWdvcmllczsgLy8gYWRkcyBtb250aCB0byB5ZWFyXG4gICAgICAgICAgICAgICAgY2F0QXJyYXkucHVzaChjYXRlZ29yaWVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllcyA9IGkgKyBtb250aDtcbiAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcmllcyA+IDExICYmIGNhdGVnb3JpZXMgPD0gMjMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcz0gY2F0ZWdvcmllcyAtIDEyO1xuICAgICAgICAgICAgICAgICAgICBjYXRZZWFyID0geWVhciArIDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yaWVzID4gMjMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcz0gY2F0ZWdvcmllcyAtIDI0O1xuICAgICAgICAgICAgICAgICAgICBjYXRZZWFyID0geWVhciArIDI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICBtb250aE5hbWUgPSBtb250aE5hbWVzW2NhdGVnb3JpZXNdO1xuICAgICAgICAgICAgICAgIGlmIChtb250aE5hbWUgPT0gJ0phbnVhcnknIHx8IG1vbnRoTmFtZSA9PSAnRmVicnVhcnknIHx8IG1vbnRoTmFtZSA9PSAnTWFyY2gnIHx8IG1vbnRoTmFtZSA9PSAnQXByaWwnIHx8IG1vbnRoTmFtZSA9PSAnQXVndXN0JyB8fCBtb250aE5hbWUgPT0gJ1NlcHRlbWJlcicgfHwgbW9udGhOYW1lID09ICdPY3RvYmVyJyB8fCBtb250aE5hbWUgPT0gJ05vdmVtYmVyJyB8fCBtb250aE5hbWUgPT0gJ0RlY2VtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBtb250aE5hbWUgPSBtb250aE5hbWUuc3Vic3RyaW5nKDAsMykgKyAnLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllcyA9IG1vbnRoTmFtZSArICcgXFwnJyArIGNhdFllYXIudG9TdHJpbmcoKS5zdWJzdHIoLTIpOztcbiAgICAgICAgICAgICAgICBjYXRBcnJheS5wdXNoKGNhdGVnb3JpZXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG4+MjQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyU3RyaW5nID0gXCJMb2FuIGJhbGFuY2UgaW4gXCIgKyBtb250aE5hbWUgKyBcIiBvZiBlYWNoIHllYXJcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJTdHJpbmcgPSBcIk1vbnRobHkgbG9hbiBiYWxhbmNlXCJcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRhaW5lcldpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbGN1bGF0b3InKS5vZmZzZXRXaWR0aDtcblxuICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggPCA0MDApIHtcbiAgICAgICAgICAgIHNldFRpY2tJbnRlcnZhbE1vYmlsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGlja0ludGVydmFsRGVza3RvcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VGlja0ludGVydmFsTW9iaWxlKCkge1xuICAgICAgICAgICAgaWYgKGFubnVhbERhdGEubGVuZ3RoID49IDIyKSB7XG4gICAgICAgICAgICAgICAgdGlja0ludGVydmFsID0gMTA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFubnVhbERhdGEubGVuZ3RoID49IDEyICYmIGFubnVhbERhdGEubGVuZ3RoIDwgMjIpIHtcbiAgICAgICAgICAgICAgICB0aWNrSW50ZXJ2YWwgPSA1O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbm51YWxEYXRhLmxlbmd0aCA8IDcpIHtcbiAgICAgICAgICAgICAgICB0aWNrSW50ZXJ2YWwgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VGlja0ludGVydmFsRGVza3RvcCgpIHtcbiAgICAgICAgICAgIGlmIChhbm51YWxEYXRhLmxlbmd0aCA8IDEyKSB7XG4gICAgICAgICAgICAgICAgdGlja0ludGVydmFsID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5udWFsRGF0YS5sZW5ndGggPiAxNykge1xuICAgICAgICAgICAgICAgIHRpY2tJbnRlcnZhbCA9IDU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBcblxuICAgICAgICB0aGlzLmRyYXdDaGFydChhbm51YWxEYXRhLGNhdEFycmF5LHRpY2tJbnRlcnZhbCk7XG5cblxuICAgICAgICAvLyBhZGQgMTAlIHRvIHlvdXIgcGF5bWVudFxuICAgICAgICB0aGlzLnRlblBheW1lbnQgPSB0aGlzLm1vbnRobHlQYXltZW50KjEuMTtcblxuICAgICAgICBOMTAgPSAoTWF0aC5sb2coMS1yKkEvdGhpcy50ZW5QYXltZW50KSotMSkvTWF0aC5sb2coMStyKTtcblxuICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgZnVsbFBheW9mZkRhdGUxMCA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnNldE1vbnRoKGN1cnJlbnREYXRlLmdldE1vbnRoKCkrTjEwKzEpKTtcblxuICAgICAgICBtb250aCA9IG1vbnRoTmFtZXNbZnVsbFBheW9mZkRhdGUxMC5nZXRNb250aCgpXTtcbiAgICAgICAgeWVhciA9IGZ1bGxQYXlvZmZEYXRlMTAuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICB0aGlzLnRlblBheW9mZiA9IG1vbnRoICsgXCIgXCIgKyB5ZWFyO1xuXG4gICAgICAgIEkxMCA9IHRoaXMudGVuUGF5bWVudCpOMTAgLSBBO1xuXG4gICAgICAgIHRoaXMudGVuU2F2ZSA9IHRoaXMudG90YWxJbnRlcmVzdCAtIEkxMDtcblxuXG4gICAgICAgIC8vIGFkZCAyNSUgdG8geW91ciBwYXltZW50XG4gICAgICAgIHRoaXMudHdlbnR5Zml2ZVBheW1lbnQgPSB0aGlzLm1vbnRobHlQYXltZW50KjEuMjU7XG4gICAgICAgIE4yNSA9IChNYXRoLmxvZygxLXIqQS90aGlzLnR3ZW50eWZpdmVQYXltZW50KSotMSkvTWF0aC5sb2coMStyKTtcblxuICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgZnVsbFBheW9mZkRhdGUyNSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnNldE1vbnRoKGN1cnJlbnREYXRlLmdldE1vbnRoKCkrTjI1KzEpKTtcblxuICAgICAgICBtb250aCA9IG1vbnRoTmFtZXNbZnVsbFBheW9mZkRhdGUyNS5nZXRNb250aCgpXTtcbiAgICAgICAgeWVhciA9IGZ1bGxQYXlvZmZEYXRlMjUuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICB0aGlzLnR3ZW50eWZpdmVQYXlvZmYgPSBtb250aCArIFwiIFwiICsgeWVhcjtcblxuICAgICAgICBJMjUgPSB0aGlzLnR3ZW50eWZpdmVQYXltZW50Kk4yNSAtIEE7XG5cbiAgICAgICAgdGhpcy50d2VudHlmaXZlU2F2ZSA9IHRoaXMudG90YWxJbnRlcmVzdCAtIEkyNTtcblxuXG4gICAgICAgIHRoaXMubW9udGhseVBheW1lbnQgPSB0aGlzLm1vbnRobHlQYXltZW50LnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHsnbWluaW11bUZyYWN0aW9uRGlnaXRzJzoyLCdtYXhpbXVtRnJhY3Rpb25EaWdpdHMnOjJ9KTtcblxuICAgICAgICB0aGlzLnRvdGFsUGFpZCA9IHRoaXMudG90YWxQYWlkLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHsnbWluaW11bUZyYWN0aW9uRGlnaXRzJzoyLCdtYXhpbXVtRnJhY3Rpb25EaWdpdHMnOjJ9KTtcblxuICAgICAgICB0aGlzLnRvdGFsSW50ZXJlc3QgPSB0aGlzLnRvdGFsSW50ZXJlc3QudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLFxuICAgICAgICAgICAgeydtaW5pbXVtRnJhY3Rpb25EaWdpdHMnOjIsJ21heGltdW1GcmFjdGlvbkRpZ2l0cyc6Mn0pO1xuXG4gICAgICAgIHRoaXMudGVuUGF5bWVudCA9IHRoaXMudGVuUGF5bWVudC50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsXG4gICAgICAgICAgICB7J21pbmltdW1GcmFjdGlvbkRpZ2l0cyc6MiwnbWF4aW11bUZyYWN0aW9uRGlnaXRzJzoyfSk7XG5cbiAgICAgICAgdGhpcy50ZW5TYXZlID0gdGhpcy50ZW5TYXZlLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHsnbWluaW11bUZyYWN0aW9uRGlnaXRzJzoyLCdtYXhpbXVtRnJhY3Rpb25EaWdpdHMnOjJ9KTtcblxuICAgICAgICB0aGlzLnR3ZW50eWZpdmVQYXltZW50ID0gdGhpcy50d2VudHlmaXZlUGF5bWVudC50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsXG4gICAgICAgICAgICB7J21pbmltdW1GcmFjdGlvbkRpZ2l0cyc6MiwnbWF4aW11bUZyYWN0aW9uRGlnaXRzJzoyfSk7XG5cbiAgICAgICAgdGhpcy50d2VudHlmaXZlU2F2ZSA9IHRoaXMudHdlbnR5Zml2ZVNhdmUudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLFxuICAgICAgICAgICAgeydtaW5pbXVtRnJhY3Rpb25EaWdpdHMnOjIsJ21heGltdW1GcmFjdGlvbkRpZ2l0cyc6Mn0pO1xuXG5cbiAgICAgIH0sXG4gICAgICBkcmF3Q2hhcnQ6IGZ1bmN0aW9uKGFubnVhbERhdGEsY2F0QXJyYXksdGlja0ludGVydmFsKSB7XG5cbiAgICAgICAgSGlnaGNoYXJ0cy5zZXRPcHRpb25zKHtcbiAgICAgICAgICAgIGxhbmc6IHtcbiAgICAgICAgICAgICAgdGhvdXNhbmRzU2VwOiAnLCcsXG4gICAgICAgICAgICAgIG51bWVyaWNTeW1ib2xzOiBbbnVsbCwgXCJNXCIsIFwiR1wiLCBcIlRcIiwgXCJQXCIsIFwiRVwiXVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBkcmF3SGlnaGNoYXJ0cygpIHtcbiAgICAgICAgICAgIEhpZ2hjaGFydHMuY2hhcnQoJ2NoYXJ0LWNvbnRhaW5lci1sb2FuY2FsYycsIHtcbiAgICAgICAgICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29sdW1uJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVkTW9kZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3BhY2luZ0JvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgICAgc3BhY2luZ1JpZ2h0OiAwLFxuICAgICAgICAgICAgICAgICAgICBzcGFjaW5nTGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlcmllczogW3tcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0xvYW4gYmFsYW5jZScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGFubnVhbERhdGFcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAvLyBmb3IgbGluZSBjaGFydHMgb25seVxuICAgICAgICAgICAgICAgIHBsb3RPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBQYWRkaW5nOiAwLjFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB4QXhpczoge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dE92ZXJmbG93OiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvUm90YXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXM6IGNhdEFycmF5LFxuICAgICAgICAgICAgICAgICAgICB0aWNrTGVuZ3RoOiA1LFxuICAgICAgICAgICAgICAgICAgICB0aWNrSW50ZXJ2YWw6IHRpY2tJbnRlcnZhbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeUF4aXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnYWxsb3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICckJyArIEhpZ2hjaGFydHMubnVtYmVyRm9ybWF0KHRoaXMudmFsdWUsMCwnLicsJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRpY2tBbW91bnQ6IDUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjcmVkaXRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0b29sdGlwOiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwLFxuICAgICAgICAgICAgICAgICAgICBzaGFyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlUHJlZml4OiAnJCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlRGVjaW1hbHM6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykge1xuICAgICAgICAgICAgZHJhd0hpZ2hjaGFydHMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGRyYXdIaWdoY2hhcnRzKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfSxcbiAgICBtb3VudGVkOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmdldFJlc3VsdHMoKVxuICAgICB9LFxuICB9KVxuXG4gIGZ1bmN0aW9uIGxpbWl0TnVtYmVyICgpIHtcbiAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPiB0aGlzLm1heExlbmd0aCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgwLCB0aGlzLm1heExlbmd0aCk7XG4gICAgICAgIHR5cGUgPSBcIm51bWJlclwiXG4gICAgICAgIG1heGxlbmd0aCA9IFwiMlwiXG4gICAgfVxuICB9Il19
