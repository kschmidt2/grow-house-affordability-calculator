var calculator=new Vue({el:"#calculator",data:{amount:"10,000",frequency:1,term:7,interestRate:3,totalPaid:"",totalInterest:"",monthlyPayment:"",payoffDate:"",tenPayment:"",tenSave:"",tenPayoff:"",twentyfivePayment:"",twentyfiveSave:"",twentyfivePayoff:""},watch:{amount:function(t){const e=t.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");Vue.nextTick(()=>this.amount=e)}},methods:{getResults:function(){let t,e,a,n,o,l,s,h,m,r,u,c,g,y=parseInt(this.amount.replace(/,/g,""),10),f=this.interestRate/100/12,d=this.term,v=[],P=[],D=[],w=y,p=2;s=(new Date).getFullYear(),1==this.frequency&&(d*=12),a=(t=Math.pow(1+f,d)-1)/(e=f*Math.pow(1+f,d)),this.monthlyPayment=y/a,this.totalPaid=this.monthlyPayment*d,this.totalInterest=this.totalPaid-y;const F=["January","February","March","April","May","June","July","August","September","October","November","December"];for(n=new Date,l=F[(o=new Date(n.setMonth(n.getMonth()+d))).getMonth()],s=o.getFullYear(),this.payoffDate=l+" "+s,v.push(y),i=0;i<d;i++)w=w*f+w-this.monthlyPayment,v.push(w),(P=v.filter((t,e)=>e%12==0)).pop(),P.push(0);for(console.log(P),n=new Date,i=0;i<P.length;i++)s=n.getFullYear(),l=n.getMonth()+1,catYear=i+s,g=l+"/"+(g=catYear.toString().substr(-2)),D.push(g);console.log(D),(h=document.getElementById("calculator").offsetWidth)<400?P.length>22?p=10:P.length>=14&&P.length<22?p=5:P.length<7&&(p=1):P.length<12?p=1:P.length>21&&(p=5),this.drawChart(P,D,p),this.tenPayment=1.1*this.monthlyPayment,m=-1*Math.log(1-f*y/this.tenPayment)/Math.log(1+f),n=new Date,fullPayoffDate10=new Date(n.setMonth(n.getMonth()+m+1)),l=F[fullPayoffDate10.getMonth()],s=fullPayoffDate10.getFullYear(),this.tenPayoff=l+" "+s,u=this.tenPayment*m-y,this.tenSave=this.totalInterest-u,this.twentyfivePayment=1.25*this.monthlyPayment,r=-1*Math.log(1-f*y/this.twentyfivePayment)/Math.log(1+f),n=new Date,fullPayoffDate25=new Date(n.setMonth(n.getMonth()+r+1)),l=F[fullPayoffDate25.getMonth()],s=fullPayoffDate25.getFullYear(),this.twentyfivePayoff=l+" "+s,c=this.twentyfivePayment*r-y,this.twentyfiveSave=this.totalInterest-c,this.monthlyPayment=this.monthlyPayment.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.totalPaid=this.totalPaid.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.totalInterest=this.totalInterest.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.tenPayment=this.tenPayment.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.tenSave=this.tenSave.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.twentyfivePayment=this.twentyfivePayment.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),this.twentyfiveSave=this.twentyfiveSave.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},drawChart:function(t,e,i){function a(){Highcharts.chart("chart-container-loancalc",{chart:{type:"column",styledMode:!0,spacingBottom:0,spacingRight:20,spacingLeft:0,animation:!1},title:{text:null},series:[{name:"Loan balance",data:t}],plotOptions:{series:{groupPadding:.1}},legend:{enabled:!1},xAxis:{labels:{style:{textOverflow:"none"},autoRotation:0},categories:e,tickLength:5,tickInterval:i},yAxis:{title:!1,labels:{overflow:"allow",formatter:function(){return"$"+Highcharts.numberFormat(this.value,0,".",",")}},tickAmount:5},credits:{enabled:!1},tooltip:{shadow:!1,padding:10,shared:!0,valuePrefix:"$",valueDecimals:2}})}Highcharts.setOptions({lang:{thousandsSep:",",numericSymbols:[null,"M","G","T","P","E"]}}),"complete"===document.readyState||"interactive"===document.readyState?a():document.addEventListener("DOMContentLoaded",a)}},mounted:function(){this.getResults()}});function limitNumber(){this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength),type="number",maxlength="2")}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGN1bGF0b3IuanMiXSwibmFtZXMiOlsiY2FsY3VsYXRvciIsIlZ1ZSIsImVsIiwiZGF0YSIsImFtb3VudCIsImZyZXF1ZW5jeSIsInRlcm0iLCJpbnRlcmVzdFJhdGUiLCJ0b3RhbFBhaWQiLCJ0b3RhbEludGVyZXN0IiwibW9udGhseVBheW1lbnQiLCJwYXlvZmZEYXRlIiwidGVuUGF5bWVudCIsInRlblNhdmUiLCJ0ZW5QYXlvZmYiLCJ0d2VudHlmaXZlUGF5bWVudCIsInR3ZW50eWZpdmVTYXZlIiwidHdlbnR5Zml2ZVBheW9mZiIsIndhdGNoIiwibmV3VmFsdWUiLCJyZXN1bHQiLCJyZXBsYWNlIiwibmV4dFRpY2siLCJ0aGlzIiwibWV0aG9kcyIsImdldFJlc3VsdHMiLCJETnVtZXJhdG9yIiwiRERlbm9taW5hdG9yIiwiRCIsImN1cnJlbnREYXRlIiwiZnVsbFBheW9mZkRhdGUiLCJtb250aCIsInllYXIiLCJjb250YWluZXJXaWR0aCIsIk4xMCIsIk4yNSIsIkkxMCIsIkkyNSIsImNhdGVnb3JpZXMiLCJBIiwicGFyc2VJbnQiLCJyIiwibiIsIm1vbnRobHlEYXRhIiwiYW5udWFsRGF0YSIsImNhdEFycmF5IiwibG9hblRvdGFsIiwidGlja0ludGVydmFsIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiTWF0aCIsInBvdyIsIm1vbnRoTmFtZXMiLCJzZXRNb250aCIsImdldE1vbnRoIiwicHVzaCIsImkiLCJmaWx0ZXIiLCJfIiwicG9wIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsImNhdFllYXIiLCJ0b1N0cmluZyIsInN1YnN0ciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvZmZzZXRXaWR0aCIsImRyYXdDaGFydCIsImZ1bGxQYXlvZmZEYXRlMTAiLCJmdWxsUGF5b2ZmRGF0ZTI1IiwidG9Mb2NhbGVTdHJpbmciLCJ1bmRlZmluZWQiLCJtaW5pbXVtRnJhY3Rpb25EaWdpdHMiLCJtYXhpbXVtRnJhY3Rpb25EaWdpdHMiLCJkcmF3SGlnaGNoYXJ0cyIsIkhpZ2hjaGFydHMiLCJjaGFydCIsInR5cGUiLCJzdHlsZWRNb2RlIiwic3BhY2luZ0JvdHRvbSIsInNwYWNpbmdSaWdodCIsInNwYWNpbmdMZWZ0IiwiYW5pbWF0aW9uIiwidGl0bGUiLCJ0ZXh0Iiwic2VyaWVzIiwibmFtZSIsInBsb3RPcHRpb25zIiwiZ3JvdXBQYWRkaW5nIiwibGVnZW5kIiwiZW5hYmxlZCIsInhBeGlzIiwibGFiZWxzIiwic3R5bGUiLCJ0ZXh0T3ZlcmZsb3ciLCJhdXRvUm90YXRpb24iLCJ0aWNrTGVuZ3RoIiwieUF4aXMiLCJvdmVyZmxvdyIsImZvcm1hdHRlciIsIm51bWJlckZvcm1hdCIsInZhbHVlIiwidGlja0Ftb3VudCIsImNyZWRpdHMiLCJ0b29sdGlwIiwic2hhZG93IiwicGFkZGluZyIsInNoYXJlZCIsInZhbHVlUHJlZml4IiwidmFsdWVEZWNpbWFscyIsInNldE9wdGlvbnMiLCJsYW5nIiwidGhvdXNhbmRzU2VwIiwibnVtZXJpY1N5bWJvbHMiLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1vdW50ZWQiLCJsaW1pdE51bWJlciIsIm1heExlbmd0aCIsInNsaWNlIiwibWF4bGVuZ3RoIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxXQUFBLElBQUFDLElBQUEsQ0FDQUMsR0FBQSxjQUNBQyxLQUFBLENBQ0FDLE9BQUEsU0FDQUMsVUFBQSxFQUNBQyxLQUFBLEVBQ0FDLGFBQUEsRUFDQUMsVUFBQSxHQUNBQyxjQUFBLEdBQ0FDLGVBQUEsR0FDQUMsV0FBQSxHQUNBQyxXQUFBLEdBQ0FDLFFBQUEsR0FDQUMsVUFBQSxHQUNBQyxrQkFBQSxHQUNBQyxlQUFBLEdBQ0FDLGlCQUFBLElBR0FDLE1BQUEsQ0FDQWQsT0FBQSxTQUFBZSxHQUNBLE1BQUFDLEVBQUFELEVBQUFFLFFBQUEsTUFBQSxJQUNBQSxRQUFBLHdCQUFBLEtBQ0FwQixJQUFBcUIsU0FBQSxJQUFBQyxLQUFBbkIsT0FBQWdCLEtBR0FJLFFBQUEsQ0FFQUMsV0FBQSxX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Q0FGLE9BQUEsQ0FDQUcsYUFBQSxLQUdBQyxPQUFBLENBQ0FDLFNBQUEsR0FFQUMsTUFBQSxDQUNBQyxPQUFBLENBQ0FDLE1BQUEsQ0FDQUMsYUFBQSxRQUVBQyxhQUFBLEdBRUEzRCxXQUFBTyxFQUNBcUQsV0FBQSxFQUNBbkQsYUFBQUEsR0FFQW9ELE1BQUEsQ0FDQWQsT0FBQSxFQUNBUyxPQUFBLENBQ0FNLFNBQUEsUUFDQUMsVUFBQSxXQUNBLE1BQUEsSUFBQXhCLFdBQUF5QixhQUFBL0UsS0FBQWdGLE1BQUEsRUFBQSxJQUFBLE9BR0FDLFdBQUEsR0FFQUMsUUFBQSxDQUNBYixTQUFBLEdBRUFjLFFBQUEsQ0FDQUMsUUFBQSxFQUNBQyxRQUFBLEdBQ0FDLFFBQUEsRUFDQUMsWUFBQSxJQUNBQyxjQUFBLEtBOURBbEMsV0FBQW1DLFdBQUEsQ0FDQUMsS0FBQSxDQUNBQyxhQUFBLElBQ0FDLGVBQUEsQ0FBQSxLQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsUUFnRUEsYUFBQWpELFNBQUFrRCxZQUFBLGdCQUFBbEQsU0FBQWtELFdBQ0F4QyxJQUVBVixTQUFBbUQsaUJBQUEsbUJBQUF6QyxLQUtBMEMsUUFBQSxXQUNBL0YsS0FBQUUsZ0JBSUEsU0FBQThGLGNBQ0FoRyxLQUFBZ0YsTUFBQXpDLE9BQUF2QyxLQUFBaUcsWUFDQWpHLEtBQUFnRixNQUFBaEYsS0FBQWdGLE1BQUFrQixNQUFBLEVBQUFsRyxLQUFBaUcsV0FDQXpDLEtBQUEsU0FDQTJDLFVBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjYWxjdWxhdG9yID0gbmV3IFZ1ZSh7XG4gICAgZWw6ICcjY2FsY3VsYXRvcicsXG4gICAgZGF0YToge1xuICAgICAgYW1vdW50OiAnMTAsMDAwJyxcbiAgICAgIGZyZXF1ZW5jeToxLFxuICAgICAgdGVybTogNyxcbiAgICAgIGludGVyZXN0UmF0ZTogMyxcbiAgICAgIHRvdGFsUGFpZDogJycsXG4gICAgICB0b3RhbEludGVyZXN0OiAnJyxcbiAgICAgIG1vbnRobHlQYXltZW50OiAnJyxcbiAgICAgIHBheW9mZkRhdGU6ICcnLFxuICAgICAgdGVuUGF5bWVudDogJycsXG4gICAgICB0ZW5TYXZlOiAnJyxcbiAgICAgIHRlblBheW9mZjogJycsXG4gICAgICB0d2VudHlmaXZlUGF5bWVudDogJycsXG4gICAgICB0d2VudHlmaXZlU2F2ZTogJycsXG4gICAgICB0d2VudHlmaXZlUGF5b2ZmOiAnJyxcblxuICAgIH0sXG4gICAgd2F0Y2g6IHtcbiAgICAgICAgYW1vdW50OiBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3VmFsdWUucmVwbGFjZSgvXFxEL2csIFwiXCIpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIixcIik7XG4gICAgICAgICAgICBWdWUubmV4dFRpY2soKCkgPT4gdGhpcy5hbW91bnQgPSByZXN1bHQpO1xuICAgICAgICAgIH0sXG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAvLyBmdW5jdGlvbnMgZ28gaGVyZVxuICAgICAgZ2V0UmVzdWx0czogZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgQSA9IHBhcnNlSW50KCh0aGlzLmFtb3VudC5yZXBsYWNlKC8sL2csICcnKSksMTApLFxuICAgICAgICAgICAgciA9ICh0aGlzLmludGVyZXN0UmF0ZS8xMDApLzEyLFxuICAgICAgICAgICAgbiA9IHRoaXMudGVybSxcbiAgICAgICAgICAgIEROdW1lcmF0b3IsXG4gICAgICAgICAgICBERGVub21pbmF0b3IsXG4gICAgICAgICAgICBELFxuICAgICAgICAgICAgY3VycmVudERhdGUsXG4gICAgICAgICAgICBmdWxsUGF5b2ZmRGF0ZSxcbiAgICAgICAgICAgIG1vbnRoLFxuICAgICAgICAgICAgeWVhcixcbiAgICAgICAgICAgIG1vbnRobHlEYXRhID0gW10sXG4gICAgICAgICAgICBhbm51YWxEYXRhID0gW10sXG4gICAgICAgICAgICBjYXRBcnJheSA9IFtdLFxuICAgICAgICAgICAgbG9hblRvdGFsID0gQSxcbiAgICAgICAgICAgIGNvbnRhaW5lcldpZHRoLFxuICAgICAgICAgICAgTjEwLFxuICAgICAgICAgICAgTjI1LFxuICAgICAgICAgICAgSTEwLFxuICAgICAgICAgICAgSTI1LFxuICAgICAgICAgICAgY2F0ZWdvcmllcyxcbiAgICAgICAgICAgIHRpY2tJbnRlcnZhbCA9IDIuXG4gICAgICAgICAgICB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgIFxuICAgICAgICAvLyBjb252ZXJ0cyB0aGUgdGVybSBpbnRvIG1vbnRoc1xuICAgICAgICBpZiAodGhpcy5mcmVxdWVuY3kgPT0gMSkge1xuICAgICAgICAgICAgbiA9IG4qMTI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhbW9ydGl6ZWQgbG9hbiBjYWxjdWxhdGlvbnNcbiAgICAgICAgRE51bWVyYXRvciA9IChNYXRoLnBvdygoMStyKSxuKSktMTtcbiAgICAgICAgRERlbm9taW5hdG9yID0gciooTWF0aC5wb3coKDErciksIG4pKTtcbiAgICAgICAgRCA9IEROdW1lcmF0b3IvRERlbm9taW5hdG9yO1xuXG4gICAgICAgIHRoaXMubW9udGhseVBheW1lbnQgPSBBL0Q7XG5cbiAgICAgICAgdGhpcy50b3RhbFBhaWQgPSB0aGlzLm1vbnRobHlQYXltZW50Km47XG5cbiAgICAgICAgdGhpcy50b3RhbEludGVyZXN0ID0gdGhpcy50b3RhbFBhaWQgLSBBO1xuXG4gICAgICAgIC8vIGdldCBjdXJyZW50IGRhdGUgYW5kIHBheW9mZiBkYXRlXG4gICAgICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLFxuICAgICAgICAgICAgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIlxuICAgICAgICAgICAgXTtcblxuICAgICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgZnVsbFBheW9mZkRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50RGF0ZS5nZXRNb250aCgpK24pKTtcblxuICAgICAgICBtb250aCA9IG1vbnRoTmFtZXNbZnVsbFBheW9mZkRhdGUuZ2V0TW9udGgoKV07XG4gICAgICAgIHllYXIgPSBmdWxsUGF5b2ZmRGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgIHRoaXMucGF5b2ZmRGF0ZSA9IG1vbnRoICsgXCIgXCIgKyB5ZWFyO1xuXG4gICAgICAgIC8vIGdldCBkYXRhIGZvciBjaGFydFxuICAgICAgICBtb250aGx5RGF0YS5wdXNoKEEpOyAvLyBhZGRzIHN0YXJ0aW5nIGxvYW4gYW1vdW50IHRvIHRoZSBkYXRhIGFycmF5XG5cbiAgICAgICAgZm9yIChpPTA7IGk8bjsgaSsrKSB7XG4gICAgICAgICAgICBsb2FuVG90YWwgPSBsb2FuVG90YWwgKiByICsgbG9hblRvdGFsIC0gdGhpcy5tb250aGx5UGF5bWVudDsgLy8gbW9udGhseSBsb2FuIHRvdGFsIGNhbGN1bGF0ZWQgYXMgcHJpbmNpcGFsIHBsdXMgaW50ZXJlc3QsIG1pbnVzIHRoZSBwYXltZW50XG4gICAgICAgICAgICBtb250aGx5RGF0YS5wdXNoKGxvYW5Ub3RhbCk7IFxuICAgICAgICAgICAgYW5udWFsRGF0YSA9IG1vbnRobHlEYXRhLmZpbHRlcigoXyxpKSA9PiBpICUgMTIgPT0gMCk7IC8vIHRha2VzIGV2ZXJ5IDEydGggZGF0YSBwb2ludFxuICAgICAgICAgICAgYW5udWFsRGF0YS5wb3AoKTsgLy8gcmVtb3ZlcyBsYXN0IGRhdGEgcG9pbnQgYW5kIHJlcGxhY2VzIGl0IHdpdGggMFxuICAgICAgICAgICAgYW5udWFsRGF0YS5wdXNoKDApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGFubnVhbERhdGEpXG5cbiAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGZvciAoaT0wOyBpPGFubnVhbERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgbW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICAgICAgICAgIGNhdFllYXIgPSBpICsgeWVhcjsgLy8gZ2V0cyB0aGUgYXJyYXkgb2YgeWVhcnMgZm9yIHRoZSBsb2FuXG5cbiAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBjYXRZZWFyLnRvU3RyaW5nKCkuc3Vic3RyKC0yKTsgLy8gY29udmVydHMgeWVhcnMgdG8gdHdvIGRpZ2l0c1xuICAgICAgICAgICAgY2F0ZWdvcmllcyA9IG1vbnRoICsgJy8nICsgY2F0ZWdvcmllczsgLy8gYWRkcyBtb250aCB0byB5ZWFyXG4gICAgICAgICAgICBjYXRBcnJheS5wdXNoKGNhdGVnb3JpZXMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhjYXRBcnJheSk7XG5cbiAgICAgICAgY29udGFpbmVyV2lkdGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsY3VsYXRvcicpLm9mZnNldFdpZHRoO1xuXG4gICAgICAgIGlmIChjb250YWluZXJXaWR0aCA8IDQwMCkge1xuICAgICAgICAgICAgc2V0VGlja0ludGVydmFsTW9iaWxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaWNrSW50ZXJ2YWxEZXNrdG9wKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRUaWNrSW50ZXJ2YWxNb2JpbGUoKSB7XG4gICAgICAgICAgICBpZiAoYW5udWFsRGF0YS5sZW5ndGggPiAyMikge1xuICAgICAgICAgICAgICAgIHRpY2tJbnRlcnZhbCA9IDEwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbm51YWxEYXRhLmxlbmd0aCA+PSAxNCAmJiBhbm51YWxEYXRhLmxlbmd0aCA8IDIyKSB7XG4gICAgICAgICAgICAgICAgdGlja0ludGVydmFsID0gNTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5udWFsRGF0YS5sZW5ndGggPCA3KSB7XG4gICAgICAgICAgICAgICAgdGlja0ludGVydmFsID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFRpY2tJbnRlcnZhbERlc2t0b3AoKSB7XG4gICAgICAgICAgICBpZiAoYW5udWFsRGF0YS5sZW5ndGggPCAxMikge1xuICAgICAgICAgICAgICAgIHRpY2tJbnRlcnZhbCA9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFubnVhbERhdGEubGVuZ3RoID4gMjEpIHtcbiAgICAgICAgICAgICAgICB0aWNrSW50ZXJ2YWwgPSA1O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgXG5cbiAgICAgICAgdGhpcy5kcmF3Q2hhcnQoYW5udWFsRGF0YSxjYXRBcnJheSx0aWNrSW50ZXJ2YWwpO1xuXG5cbiAgICAgICAgLy8gYWRkIDEwJSB0byB5b3VyIHBheW1lbnRcbiAgICAgICAgdGhpcy50ZW5QYXltZW50ID0gdGhpcy5tb250aGx5UGF5bWVudCoxLjE7XG5cbiAgICAgICAgTjEwID0gKE1hdGgubG9nKDEtcipBL3RoaXMudGVuUGF5bWVudCkqLTEpL01hdGgubG9nKDErcik7XG5cbiAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGZ1bGxQYXlvZmZEYXRlMTAgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50RGF0ZS5nZXRNb250aCgpK04xMCsxKSk7XG5cbiAgICAgICAgbW9udGggPSBtb250aE5hbWVzW2Z1bGxQYXlvZmZEYXRlMTAuZ2V0TW9udGgoKV07XG4gICAgICAgIHllYXIgPSBmdWxsUGF5b2ZmRGF0ZTEwLmdldEZ1bGxZZWFyKCk7XG5cbiAgICAgICAgdGhpcy50ZW5QYXlvZmYgPSBtb250aCArIFwiIFwiICsgeWVhcjtcblxuICAgICAgICBJMTAgPSB0aGlzLnRlblBheW1lbnQqTjEwIC0gQTtcblxuICAgICAgICB0aGlzLnRlblNhdmUgPSB0aGlzLnRvdGFsSW50ZXJlc3QgLSBJMTA7XG5cblxuICAgICAgICAvLyBhZGQgMjUlIHRvIHlvdXIgcGF5bWVudFxuICAgICAgICB0aGlzLnR3ZW50eWZpdmVQYXltZW50ID0gdGhpcy5tb250aGx5UGF5bWVudCoxLjI1O1xuICAgICAgICBOMjUgPSAoTWF0aC5sb2coMS1yKkEvdGhpcy50d2VudHlmaXZlUGF5bWVudCkqLTEpL01hdGgubG9nKDErcik7XG5cbiAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGZ1bGxQYXlvZmZEYXRlMjUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50RGF0ZS5nZXRNb250aCgpK04yNSsxKSk7XG5cbiAgICAgICAgbW9udGggPSBtb250aE5hbWVzW2Z1bGxQYXlvZmZEYXRlMjUuZ2V0TW9udGgoKV07XG4gICAgICAgIHllYXIgPSBmdWxsUGF5b2ZmRGF0ZTI1LmdldEZ1bGxZZWFyKCk7XG5cbiAgICAgICAgdGhpcy50d2VudHlmaXZlUGF5b2ZmID0gbW9udGggKyBcIiBcIiArIHllYXI7XG5cbiAgICAgICAgSTI1ID0gdGhpcy50d2VudHlmaXZlUGF5bWVudCpOMjUgLSBBO1xuXG4gICAgICAgIHRoaXMudHdlbnR5Zml2ZVNhdmUgPSB0aGlzLnRvdGFsSW50ZXJlc3QgLSBJMjU7XG5cblxuICAgICAgICB0aGlzLm1vbnRobHlQYXltZW50ID0gdGhpcy5tb250aGx5UGF5bWVudC50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsXG4gICAgICAgICAgICB7J21pbmltdW1GcmFjdGlvbkRpZ2l0cyc6MiwnbWF4aW11bUZyYWN0aW9uRGlnaXRzJzoyfSk7XG5cbiAgICAgICAgdGhpcy50b3RhbFBhaWQgPSB0aGlzLnRvdGFsUGFpZC50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsXG4gICAgICAgICAgICB7J21pbmltdW1GcmFjdGlvbkRpZ2l0cyc6MiwnbWF4aW11bUZyYWN0aW9uRGlnaXRzJzoyfSk7XG5cbiAgICAgICAgdGhpcy50b3RhbEludGVyZXN0ID0gdGhpcy50b3RhbEludGVyZXN0LnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHsnbWluaW11bUZyYWN0aW9uRGlnaXRzJzoyLCdtYXhpbXVtRnJhY3Rpb25EaWdpdHMnOjJ9KTtcblxuICAgICAgICB0aGlzLnRlblBheW1lbnQgPSB0aGlzLnRlblBheW1lbnQudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLFxuICAgICAgICAgICAgeydtaW5pbXVtRnJhY3Rpb25EaWdpdHMnOjIsJ21heGltdW1GcmFjdGlvbkRpZ2l0cyc6Mn0pO1xuXG4gICAgICAgIHRoaXMudGVuU2F2ZSA9IHRoaXMudGVuU2F2ZS50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsXG4gICAgICAgICAgICB7J21pbmltdW1GcmFjdGlvbkRpZ2l0cyc6MiwnbWF4aW11bUZyYWN0aW9uRGlnaXRzJzoyfSk7XG5cbiAgICAgICAgdGhpcy50d2VudHlmaXZlUGF5bWVudCA9IHRoaXMudHdlbnR5Zml2ZVBheW1lbnQudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLFxuICAgICAgICAgICAgeydtaW5pbXVtRnJhY3Rpb25EaWdpdHMnOjIsJ21heGltdW1GcmFjdGlvbkRpZ2l0cyc6Mn0pO1xuXG4gICAgICAgIHRoaXMudHdlbnR5Zml2ZVNhdmUgPSB0aGlzLnR3ZW50eWZpdmVTYXZlLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHsnbWluaW11bUZyYWN0aW9uRGlnaXRzJzoyLCdtYXhpbXVtRnJhY3Rpb25EaWdpdHMnOjJ9KTtcblxuXG4gICAgICB9LFxuICAgICAgZHJhd0NoYXJ0OiBmdW5jdGlvbihhbm51YWxEYXRhLGNhdEFycmF5LHRpY2tJbnRlcnZhbCkge1xuXG4gICAgICAgIEhpZ2hjaGFydHMuc2V0T3B0aW9ucyh7XG4gICAgICAgICAgICBsYW5nOiB7XG4gICAgICAgICAgICAgIHRob3VzYW5kc1NlcDogJywnLFxuICAgICAgICAgICAgICBudW1lcmljU3ltYm9sczogW251bGwsIFwiTVwiLCBcIkdcIiwgXCJUXCIsIFwiUFwiLCBcIkVcIl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd0hpZ2hjaGFydHMoKSB7XG4gICAgICAgICAgICBIaWdoY2hhcnRzLmNoYXJ0KCdjaGFydC1jb250YWluZXItbG9hbmNhbGMnLCB7XG4gICAgICAgICAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbHVtbicsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlZE1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNwYWNpbmdCb3R0b206IDAsXG4gICAgICAgICAgICAgICAgICAgIHNwYWNpbmdSaWdodDogMjAsXG4gICAgICAgICAgICAgICAgICAgIHNwYWNpbmdMZWZ0OiAwLFxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhbHNlXG4gICAgICAgICAgICAgICAgfSwgXG4gICAgICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTG9hbiBiYWxhbmNlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYW5udWFsRGF0YVxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIC8vIGZvciBsaW5lIGNoYXJ0cyBvbmx5XG4gICAgICAgICAgICAgICAgcGxvdE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cFBhZGRpbmc6IDAuMVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHhBeGlzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0T3ZlcmZsb3c6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Sb3RhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllczogY2F0QXJyYXksXG4gICAgICAgICAgICAgICAgICAgIHRpY2tMZW5ndGg6IDUsXG4gICAgICAgICAgICAgICAgICAgIHRpY2tJbnRlcnZhbDogdGlja0ludGVydmFsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB5QXhpczoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdhbGxvdycsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyQnICsgSGlnaGNoYXJ0cy5udW1iZXJGb3JtYXQodGhpcy52YWx1ZSwwLCcuJywnLCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGlja0Ftb3VudDogNSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNyZWRpdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTAsXG4gICAgICAgICAgICAgICAgICAgIHNoYXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVQcmVmaXg6ICckJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVEZWNpbWFsczogMlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSB7XG4gICAgICAgICAgICBkcmF3SGlnaGNoYXJ0cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZHJhd0hpZ2hjaGFydHMpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9LFxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuZ2V0UmVzdWx0cygpXG4gICAgIH0sXG4gIH0pXG5cbiAgZnVuY3Rpb24gbGltaXROdW1iZXIgKCkge1xuICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA+IHRoaXMubWF4TGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnNsaWNlKDAsIHRoaXMubWF4TGVuZ3RoKTtcbiAgICAgICAgdHlwZSA9IFwibnVtYmVyXCJcbiAgICAgICAgbWF4bGVuZ3RoID0gXCIyXCJcbiAgICB9XG4gIH0iXX0=
